<header>
  <h1>{{ title }}</h1>
  {{@ intro }}
    <p>{{ intro }}</p>
  {{@ end }}
</header>
{{@ bannerimg and bannerimginpage ~= 'false' }}
  <div class='image-container'>
    {{ image(file(bannerimg, 'items/' .. name), tr(bannerimgalt or ''), 'item-banner') }}
  </div>
{{@ end }}
{{@ (intro and intro ~= '') or bannerimg }}
  <div role='separator' class='item-separator'></div>
{{@ end }}
<section class='item-contents'>{{ rendermarkup(tr(contents)) }}</section>
{{@ date }}
<section class='item-date'>
  {{ renderdate(date) }}
</section>
{{@ end }}

{{@ usemath == 'true' }}
<link rel='stylesheet' href='/bin/fonts/katex/katex.css'>
<style>
.item-contents .katex { font-size: 1rem; }
</style>
{{@ end }}

<style>
.item-contents p {
  text-indent: 2em;
}
.item-contents > p *,
.item-contents blockquote p,
.item-contents div.image-container p {
  text-indent: 0;
}
.item-contents > p.text-center {
  text-align: center;
  text-indent: 0;
}
div.image-container {
  text-align: center;
  margin-block: 1em;
}
img.item-banner, .item-contents img {
  object-fit: contain;
  display: inline-block;
}
img.item-banner,
.item-contents div.image-container img:not(.vertical) {
  max-block-size: 20em;
}
img.item-banner,
.item-contents div.image-container img:not(.orig-size) {
  inline-size: 80%;
  block-size: auto;
}
.item-contents div.image-container img.vertical {
  inline-size: 100%;
  max-inline-size: 20em;
}
.item-contents div.image-container img.small {
  inline-size: 50%;
  max-inline-size: 15em;
}
.item-contents div.image-container img.orig-size {
  max-inline-size: 80%;
  block-size: auto;
}
.item-contents div.image-container img.more-margin {
  margin-block: 1.5em;
}
.item-contents div.image-container img.float-end {
  inline-size: auto;
  max-inline-size: 45%;
  float: inline-end;
  margin-inline-start: 1em;
  margin-block-end: 0.25em;
}
@media (max-width: 115vh), (max-width: 48rem) {
  .item-contents div.image-container img.float-end {
    inline-size: 80%;
    max-inline-size: 80%;
    float: none;
    margin-inline-start: inherit;
  }
}
.item-contents div.image-container p {
  margin-block: 0.25em 0;
}
.item-date {
  margin-block-start: 1em;
}
@media (max-width: 115vh), (max-width: 48rem) {
  img.item-banner, .item-contents div.image-container img {
    max-inline-size: 100%;
  }
}

.item-contents div.table-container {
  text-align: center;
  margin-block: 1.5em;
  margin-inline: 0;
}
.item-contents div.table-container table {
  min-inline-size: 75%;
  margin-inline: auto;
}
.item-contents div.table-container table,
.item-contents div.table-container th,
.item-contents div.table-container td {
  border-block: 0.1em solid #60605c;
  border-collapse: collapse;
}
.item-contents div.table-container th,
.item-contents div.table-container table {
  border-block: 0.15em solid #60605c;
}

{{@ extrastyle }}
{{ extrastyle }}
{{@ end }}
</style>
