<!DOCTYPE html>
<html lang='{{ lang }}'><head>
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>

{{fulltitle.zh =}}
{{ title }} — Site
{{metadescription.zh =}}
说明说明！

{{fulltitle.en =}}
{{ title }} — Site
{{metadescription.en =}}
A Description

{{=}}
  <meta name='description' content='{{ metadescription }}'>
  <meta property='og:title' content='{{ fulltitle }}'>
  <meta property='og:type' content='website'>
  <meta property='og:image' content=''>
  <meta property='og:url' content=''>
  <meta property='og:description' content='{{ metadescription }}'>
  <meta property='og:locale' content='{{ lang }}'>
  {{@ otherlang in {'zh', 'en'} }}
    {{@ otherlang ~= lang }}
      <meta property='og:locale:alternate' content='{{ otherlang }}'>
    {{@ end }}
  {{@ end }}

  <link rel='alternate' type='application/rss+xml' href='/rss.{{ lang }}.xml' title='RSS feed'>
  <link rel='alternate' type='application/atom+xml' href='/atom.{{ lang }}.xml' title='Atom feed'>

  <title>{{ fulltitle }}</title>

  <style></style>
</head><body>

{{
  cats = render('categories.txt').cats
}}

<div id='main-grid'>
<nav>
<h1>Site Name</h1>
<ul>
  {{@ cat in cats}}
  <li><a class='pastel {{cat.name}}'
    href='/{{@ cat.name ~= "home"}}{{cat.name}}{{@ end}}'>{{cat.title}}</a></li>
  {{@ end}}
</ul>
<div id='icon-buttons'>
  <details id='lang-container'>
    <summary class='pastel miscellaneous little-icons' title='语言/Language'>🌐</summary>
    <div id='lang-list'>
      <a href='/?lang=zh'>汉语/Chinese</a>
      <a href='/?lang=en'>English/英语</a>
    </div>
  </details><a
    href='/?dark=1' class='pastel miscellaneous little-icons' title='深色主题'>🌙</a>
</div>
</nav>

<main>

<div id='top-fleuron'></div>

<article>
{{ contents }}
</article>

</main>

<aside>
Related links
</aside>
</div>

<footer>
<span>
  <span>Brimming with <span class='little-icons' style='display: inline-block; transform: rotate(-8deg)'>&#x1f31f;</span></span>
</span>
<br>
{{ render('timeofday.html') }}
</footer>

<style>
html {
  font-size: clamp(100%, 75% + 0.5vw, 112.5%);
  line-height: 1.5;
}
body {
  margin: 0;
  padding: 0;
  min-width: 100vw;
  min-height: 100vh;
  background: url(/bin/background.svg), hsl(50deg, 100%, 99%) center;
  color: #181410;
}
body.dark {
  background: url(/bin/background-dark.svg), hsl(36deg, 80%, 7%) center;
  color: #fefbfa;
}

#main-grid {
  display: grid;
  grid-template-columns: 1fr 3fr 1fr;
}
#main-grid > aside {
  grid-column: 3;
}

nav > ul {
  display: flex;
  flex-direction: column;
  padding: 0;
}
nav > ul > li {
  flex: 1 0 auto;
  margin-block-end: 0.667em;
}
nav > ul > li::before {
  display: none;
}

#lang-container {
  position: relative;
  display: inline-block;
  margin-inline-end: 0.33em;
}
#lang-list {
  inline-size: 8.5em;
  white-space: nowrap;
  text-align: center;
  padding-block: 0.5rem;
  background: rgba(240, 240, 240, 97%);
  position: absolute;
  inset-block-start: 2rem;
}
#lang-list a {
  display: block;
}

summary {
  list-style: none;
}
summary::-webkit-details-marker {
  display: none;
}

nav, main, aside, footer { padding: 1rem; }

#main-grid > nav {
  display: block;
  grid-row: 1;
  grid-column: 1;
}
#main-grid > main {
  display: block;
  grid-row: 1;
  grid-column: 2;
}

@media (max-width: 60rem) {
  #main-grid {
    grid-template-columns: 5fr 16fr;
  }
  #main-grid > nav {
    grid-row: 1 / span 2;
    grid-column: 1;
  }
  #main-grid > aside {
    grid-row: 2;
    grid-column: 2;
  }
}

@media (max-width: 115vh), (max-width: 48rem) {
  #main-grid {
    display: inline;
  }
  nav {
    padding-block: 0.5rem 0.25rem;
  }
  main {
    padding-block-start: 1.25rem;
  }
  nav > ul {
    flex-direction: row;
    column-gap: 1rem;
    overflow: scroll;
    margin-block-end: 0;
  }
  nav > ul > li {
    margin-block-end: 0.25em;
  }
  #icon-buttons {
    position: absolute;
    inset-inline-end: 1rem;
    inset-block-start: 1rem;
  }
  #icon-buttons summary, #icon-buttons > a {
    font-size: 1.5rem;
  }
  #lang-list {
    inset-inline-end: 0;
  }
}

.pastel, .hidden-pastel {
  text-decoration: none;
  color: inherit;
  display: inline-block;
}
.pastel::after, a.hidden-pastel::after {
  content: '';
  display: block;
  block-size: 0.12em;
  margin-block-start: -0.12em;
  margin-block-end: -0.12em;
  border-radius: 1em;
  /* Transitions with logical properties do not work on Safari 14 */
  transition:
    width 0.2s ease, height 0.2s ease,
    margin 0.2s ease;
}
.pastel:hover::after,
.pastel:focus::after {
  block-size: 0.24em;
  margin-block-start: -0.18em;
}
.hidden-pastel::after {
  block-size: 0.08em;
  margin-block-start: -0.10em;
  margin-block-end: -0.07em;
  inline-size: 0;
  margin-inline-start: 50%;
}
.hidden-pastel:hover::after {
  inline-size: 100%;
  margin-inline-start: 0;
}
{{@ cat in cats}}
{{ hue, sat, val1, val2 = table.unpack(cat.tint) }}
a.{{cat.name}} { color: hsl({{hue}}deg, {{sat}}%, {{val1}}%); }
a.{{cat.name}}::after { background: hsla({{hue}}deg, {{sat}}%, {{val2}}%, 90%); }
body.dark a.{{cat.name}} { color: hsl({{hue}}deg, {{sat + (100 - sat) * 0.4}}%, {{100 - (100 - val1) * 0.45}}%); }
body.dark a.{{cat.name}}::after { background: hsla({{hue}}deg, {{sat + (100 - sat) * 0.4}}%, {{100 - (100 - val2) * 0.45}}%, 40%); }
{{@ end}}
{{ hue, sat, val1, val2 = 240, 40, 50, 85 }}
a.external { color: hsl({{hue}}deg, {{sat}}%, {{val1}}%); }
a.external::after { background: hsla({{hue}}deg, {{sat}}%, {{val2}}%, 90%); }
body.dark a.external { color: hsl({{hue}}deg, {{sat + (100 - sat) * 0.4}}%, {{100 - (100 - val1) * 0.45}}%); }
body.dark a.external::after { background: hsla({{hue}}deg, {{sat + (100 - sat) * 0.4}}%, {{100 - (100 - val2) * 0.45}}%, 40%); }
{{ hue, sat, val1, val2 = 0, 0, 40, 80 }}
#lang-container > summary { cursor: pointer; }
.pastel.miscellaneous { color: hsl({{hue}}deg, 0%, {{val1}}%); }
.pastel.miscellaneous::after { background: hsla({{hue}}deg, 0%, {{val2}}%, 90%); }
body.dark .pastel.miscellaneous { color: hsl({{hue}}deg, 0%, {{100 - (100 - val1) * 0.45}}%); }
body.dark .pastel.miscellaneous::after { background: hsla({{hue}}deg, 0%, {{100 - (100 - val2) * 0.45}}%, 40%); }

{{@ curcat}}
{{ hue, sat, val1, val2 = table.unpack(cats[curcat].tint) }}
main header h1 { color: hsl({{hue}}deg, {{sat}}%, {{val1 / 2}}%); }
body.dark main header h1 { color: hsl({{hue}}deg, {{sat + (100 - sat) * 0.6}}%, {{val1 + (100 - val1) * 0.7}}%); }
{{@ end}}

footer > span:first-child > *:not(:last-child)::after {
  content: '|';
  margin-inline: 0.25em;
}

main {
  position: relative;
}
#top-fleuron {
  background: no-repeat center 0 / contain url('/bin/top-fleuron.svg');
  inline-size: 100%;
  block-size: 6.75rem;  /* max-inline-size (72rem) * 960/90 */
  position: absolute;
  inset-block-start: -0.3em;
  inset-inline-start: 0;
  z-index: -1;
  filter: hue-rotate({{hue}}deg);
}
body.dark #top-fleuron { opacity: 45%; }

@media (max-width: 115vh), (max-width: 48rem) {
  #top-fleuron {
    inset-block-start: 0;
    block-size: 9.375vw;  /* 100vw * 90/960 */
    min-block-size: 3.375rem; /* max-inline-size (36rem) * 960/90 */
    background-size: cover;
  }
}

@font-face {
  font-family: 'Livvic';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/bin/fonts/Livvic-Regular.woff2) format('woff2'),
       url(/bin/fonts/Livvic-Regular.woff) format('woff');
}
@font-face {
  font-family: 'Livvic';
  font-style: normal;
  font-weight: bold;
  font-display: swap;
{{ boldname = {zh = 'Medium', en = 'SemiBold'} }}
  src: url(/bin/fonts/Livvic-{{ boldname }}.woff2) format('woff2'),
       url(/bin/fonts/Livvic-{{ boldname }}.woff) format('woff');
}
@font-face {
  font-family: 'Sono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/bin/fonts/Sono_Monospace-Regular.woff2) format('woff2'),
       url(/bin/fonts/Sono_Monospace-Regular.woff) format('woff');
}
@font-face {
  font-family: 'Sono';
  font-style: normal;
  font-weight: bold;
  font-display: swap;
  src: url(/bin/fonts/Sono_Monospace-SemiBold.woff2) format('woff2'),
       url(/bin/fonts/Sono_Monospace-SemiBold.woff) format('woff');
}
@font-face {
  font-family: 'AaKaiSong';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/bin/fonts/AaKaiSong.stray-{{ basehash(savepath) }}.woff2) format('woff2');
}
{{ AaKaiSong_css }}
@font-face {
  font-family: 'Ayuu Little Icons — 221202a';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(/bin/fonts/little-icons.woff2) format('woff2'),
       url(/bin/fonts/little-icons.woff) format('woff');
}
:not(pre, code, .tt, .little-icons):lang(en) {
  font-family: 'Livvic', 'AaKaiSong', sans-serif;
}
:not(pre, code, .tt, .little-icons):lang(zh) {
  font-family: 'AaKaiSong', 'Livvic', sans-serif;
}
pre, code, .tt {
  font-family: 'Sono', monospace;
  font-size: 0.9rem;
}
.little-icons {
  font-family: 'Ayuu Little Icons — 221202a';
}

sup {
  line-height: 0;
}
a.pastel.external > sup.little-icons {
  user-select: none;
  display: inline-block;
  position: relative;
  top: -0.1em;
}

a.date-term-link::after { background: rgb(216, 216, 216); }
.date-term {
  font-size: 0.9rem;
  color: rgb(112, 112, 112);
}
.date-term .date-bracket-start,
.date-term .date-bracket-end {
  font-size: 0.5rem;
  position: relative;
  inset-block-start: -0.15rem;
}
.date-term .date-bracket-start { margin-inline-end: 0.2em; }
.date-term .date-bracket-end { margin-inline-start: 0.04em; }
.date-term .date-term-single {
  display: inline-block;
}
.date-term .delim::after { content: '~'; padding-inline: 0.1em 0.2em; }
.date-term sup::after {
  font-family: 'Ayuu Little Icons — 221202a';
  line-height: 0;
  display: inline-block;
}
.date-term sup.season-1::after { content: '\1f340'; transform: rotate(-21deg); }
.date-term sup.season-2::after { content: '\1f338'; transform: rotate(10deg); }
.date-term sup.season-3::after { content: '\1f333'; transform: rotate(0deg); }
.date-term sup.season-4::after { content: '\2600'; transform: rotate(0deg); }
.date-term sup.season-5::after { content: '\1f33e'; transform: rotate(-15deg) scale(0.99); }
.date-term sup.season-6::after { content: '\1f343'; transform: rotate(-25deg) scale(1.02); }
.date-term sup.season-7::after { content: '\2744'; transform: rotate(8deg) scale(0.97); }
.date-term sup.season-8::after { content: '\1f9ca'; transform: rotate(5deg); }

body.dark a.date-term-link::after { background: rgb(128, 128, 128); }
body.dark .date-term { color: rgb(180, 180, 180); }

div[role='separator'] {
  block-size: 1.5em;
  margin-block: 1.5em;
  inline-size: calc(100% - 3em);
  margin-inline-start: 1.5em;
  background: no-repeat center 0 / auto 100% url('/bin/divider-fleuron-heart.svg');
  filter: hue-rotate({{hue}}deg);
  position: relative;
}
div[role='separator']::before, div[role='separator']::after {
  content: '';
  display: inline-block;
  block-size: 1.5em;
  inline-size: 1.5em;
  background: no-repeat 0 / contain url('/bin/divider-end.svg');
  position: absolute;
}
div[role='separator']::before { inset-inline-start: -1.5em; }
div[role='separator']::after { inset-inline-end: -1.5em; }
div[role='separator'].item-separator,
div[role='separator'].cloudy {
  background-image: url('/bin/divider-fleuron-cloudy.svg');
  background-repeat: repeat-x;
}
div[role='separator'].windy {
  background-image: url('/bin/divider-fleuron-windy.svg');
  background-repeat: repeat-x;
}

div.item-separator:nth-child(5n+1) { background-position-x: -4em; }
div.item-separator:nth-child(5n+2) { background-position-x: 4em; }
div.item-separator:nth-child(5n+3) { background-position-x: 0em; }
div.item-separator:nth-child(5n+4) { background-position-x: -8em; }
div.item-separator:nth-child(5n+5) { background-position-x: 8em; }

body.dark div[role='separator']
{ opacity: 60%; }

.kaomoji {
  display: inline-block;
  vertical-align: middle;
}
.kaomoji > svg {
  block-size: 1em;
  inline-size: auto;
}
body.dark .kaomoji { filter: invert(); }

table.file-table {
  margin-block: 1em;
  margin-inline: 0;
  border-spacing: 1em 0.4em;
}
table.file-table > tbody {
  word-wrap: anywhere;
}
table.file-table .file-table-name {
  margin-inline: 0.2em 0.33em;
}
@media (max-width: 115vh), (max-width: 48rem) {
  table.file-table {
    margin-block-start: -0.4em;
    border-spacing: 1em 0;
  }
  table.file-table tr > td { display: block; }
  table.file-table tr > td:first-child {
    margin-block: 0.5em 0;
    margin-inline: -0.7em -0.4em;
  }
}

ul {
  padding-inline-start: 3em;
  list-style: none;
}
ul > li::before {
  content: '–';
  margin-inline: -1.25em 0.75em;
}

section h1 { font-size: 1.2rem; margin-block-end: 1.08rem; }
section h2 { font-size: 1.14rem; margin-block-end: 1rem; }
section h3 { font-size: 1.08rem; margin-block-end: 1rem; }
blockquote {
  margin-block: -0.1em;
  margin-inline: 1em;
  padding-block: 0.6em;
  padding-inline: 1em;
  border-inline-start: 0.1em solid hsl({{hue}}deg, {{sat}}%, {{val1}}%);
  background: hsla({{hue}}deg, {{sat}}%, {{val1}}%, 4%);
}
blockquote *:first-child { margin-block-start: 0; }
blockquote *:last-child { margin-block-end: 0; }
blockquote + blockquote { margin-block-start: 0.4em; }
body.dark blockquote {
  border-inline-start: 0.1em solid hsl({{hue}}deg, {{sat}}%, {{100 - (100 - val1) * 0.45}}%);
  background: hsla({{hue}}deg, {{sat}}%, {{100 - (100 - val1) * 0.45}}%, 8%);
}

span:lang(lat) { font-style: italic; }

.no-break {
  display: inline-block;
  white-space: nowrap;
}

.music-track {
  display: flex;
  column-gap: 0.5em;
  align-items: center;
}
.music-track img {
  inline-size: 4.75em;
  block-size: 4.75em;
  object-fit: cover;
}
.music-track .orig-title {
  font-size: 0.75em;
  color: #886;
  display: block;
}

body.dark img.syncdark { filter: invert(); }
</style>

<script>
(() => {
document.body.classList.add('js')
const langContainer = document.getElementById('lang-container')
const langList = document.getElementById('lang-list')
const tempEvents = [
  [document.body, 'mousedown', (e) => closeLangContainer(e)],
  [document.body, 'keydown', (e) => { if (e.keyCode === 27) closeLangContainer(e) }],
  [langContainer, 'mousedown', (e) => e.stopPropagation()],
]
const clearTempEvents = () => {
  for (const [el, key, fn] of tempEvents)
    el.removeEventListener(key, fn)
}
const closeLangContainer = (e) => {
  langContainer.open = false
  clearTempEvents()
  e.preventDefault()
}
langContainer.addEventListener('toggle', (e) => {
  if (langContainer.open) {
    for (const [el, key, fn] of tempEvents)
      el.addEventListener(key, fn)
  } else {
    clearTempEvents()
  }
})
})()
</script>

</body></html>
